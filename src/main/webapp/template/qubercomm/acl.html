{{#partial "page"}}

<style>
.selected{ 
background-color: rgba(211,211,211,.7);
color: black;
}
table{
cursor: default;
}
@media screen and (max-width: 767px){
	.mob-btn{
		margin-right: -67px !important;
	}
	.mob-ac{
		padding: 8px;
	}	
}
</style>
<div id="page-content-wrapper" class="acc-sec">
	<div class="container-fluid">
		<h4 class="acc-sec-title"></h4>		
		<div class=" venue-details" >
			<div class="col-md-10 col-sm-10 col-xs-10 view-details" >
				<ul>
					<li class="displayBlockName">
					<img src="/facesix/static/qubercomm/images/qacl-logo.png" alt="" id="quberIm" style="width:80px;margin-left:-7px;"><label class="venue-name" id="acmob">Access Controller</label>
					</li>
			   </ul>
			</div>
				<div class="col-md-9 col-sm-9 col-xs-9">	<li class="scan">
					    
					</li>
					
				</div>
		</div>		
      </div>
      <div class="col-md-12">
			<div class="col-md-12 mob-ac"><form  method="post"  role="form"  action="/facesix/web/acl/profile?cid={{cid}}&sid={{sid}}&spid={{spid}}" id='quberset'>
				<div class="as-section" id="sessionId" style="box-shadow:5px 6px 5px #cdd9ef;margin-bottom:50px;">				
					<div class="row margin0">
						<div class="col-md-12 col-sm-12 col-xs-12 pR-0">
							<div class="as-left">
								
							   <div class="form-group disp-inline"">
									<span for="">Client MAC</span>
									<input type="text" style="text-transform: uppercase;" class="form-control disp-block valign"   name="conn" id="conn" onkeyup="doInsert(this)" maxlength="17"  value="{{quberACL.conn}}" placeholder="xx:xx:xx:xx:xx:xx">
								
								</div>
								
								<div class="form-group disp-inline">
									<span for="">SSID</span>
									<input type="text" class="form-control disp-block valign"   placeholder="SSID" name="ssid" id="ssid"  value="{{quberACL.ssid}}">
								</div>			
								
								<div class="form-group disp-inline ">
									<span for="">Policy</span>
									<select class="form-control disp-block valign"  name="pid" id="pid" onchange="checkUID();">
											{{#if quberACL.pid}}
												<option value="{{fquberACL.pid}}">{{quberACL.pid}}	</option>
												{{/if}}
												
												{{#if cid}}
													<option value="Customer">Customer</option>
												{{/if}}
												{{#if sid}}
													<option value="Venue">Venue</option>
												{{/if}}
												{{#if spid}}
													<option value="Floor">Floor</option>
												{{/if}}
										
												<option value="uid" selected="uid">AP</option>
									</select>
									<!-- <input type="text"  value="{{quberACL.pid}}" > -->
								</div>
										
								<div class="form-group disp-inline">
										<span for="">UID</span>
										<select class="form-control" name="uid" id="uid" style="text-transform: uppercase;">
										{{#each devicelist}}
	                                	<option value="{{uid}}">{{uid}}</option>
	                                	{{/each}}
										</select>
								</div>
								
								 <div class="form-group disp-inline" style="visibility: hidden" >
									<!--	<span for="">ACL</span>
										<select class="form-control disp-block valign" name="acl" id="acl">
												<option value="whitelist" {{#if quberACL.acl="whitelist"}}selected="selected"{{/if}} >Whitelist</option>
												<option value="blacklist"{{#if quberACL.acl="blacklist"}}selected="selected"{{/if}}>Blacklist</option>
										</select> -->
									
								</div> 				
								
								<div class="form-group disp-inline " style="width:47%;">
										<input type="submit" id="trigsubmit" style="display:none">
										{{#if SYS_WRITE}}
										<button type="button" name="submit" id="saveset" value="save" class="btn btn-primary btn3d btn-save mob-btn" style="float:right; margin-top:37px;margin-right:20px;">Submit</button>
								        {{/if}}
								</div>
						</div>						
						
					</div>		
					
					
					
			</div>

			</form>
		</div>
		<br><br>
		<div class="col-md-15 padding-device padding-right-0" style="padding-right: 24px;">
			<div class="chart-box acl-table-chart-box ui-charts-extras"></div>
		</div>	
	</div>
</div>
 </div>


</div>


<div class="pad0 col-sm-3 col-md-3 sidebar LogsSection inactive" id="rightPanel" >
			<div class="network-map-section logMapSection">		
				<div class="network-top-section">
					<div class="search-opt">
						<form id="uidForm">
							<div class="form-group">
								<div class="serach-box">
									<span class="icon">
										<i class="glyphicon glyphicon-search"></i>
									</span>
									<input type="search" class="form-control search-align" placeholder="Search Devices..." oninput="javascript:triggerChange(event)">
								</div>
							</div>
						</form>
					</div>
					<div class="network-heading display-inline hide">
						
					</div>
					<div class="filter-opt display-inline pull-right">
						<ul class="list-unstyled filter-opt-style">
							<li class="search-mob-hide hide">
								<img src="/facesix/static/qubercomm/images/networkconfig/search.png" class="search-icon" alt="">
								Search
							</li>
							<li class="dropdown filter-dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">
									<img src="/facesix/static/qubercomm/images/networkconfig/filter.png" alt="">
									Filter
									<span class="caret"></span></a>
									<ul class="dropdown-menu filter-style">
										<li><a href="#">Server</a></li>
										<li><a href="#">Switch</a></li>
										<li><a href="#">Ap</a></li>
										<li><a href="#">Sensor</a></li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
					<div class="device-section">
						<span>3 Devices</span>
						<ul class="list-unstyled">
						
						<li class="powerBtn" action="qacl" btn-type="qacl" devtype="Server" uid="{{uid}}">
							<a href="#" class="">
								<i class="fa fa-lock fa-spin"  style="color: #cf0;"></i>
							</a>
						</li>
													
			
					<li>
						<a href="" class="dshbrdLink">
							<i class="fa fa-bar-chart" style="color:lightgray"></i>
						</a>
					</li>
						<!-- <li>
							<a href="" class="location">
								<img src="/facesix/static/qubercomm/images/networkconfig/marker.png" alt="">
							</a>
						</li> -->
														
							<li class="powerBtn" action="reset" btn-type="reset" devtype="Server" uid="{{uid}}">
								<a href="">
									<i class=" fa fa-undo fa_style"></i>
								</a>
							</li>
							<li class="powerBtn" action="reboot" btn-type="reboot" devtype="Server" uid="{{uid}}">
								<a href="">
									<i class="fa fa-power-off fa_style"></i>
								</a>
							</li>
						</ul>
					</div>
					<div class="device-notification">
						<ul class="list-unstyled" id="network-tree"></ul>
					</div>
				</div>				
	

					
		</div>
			
				
	<!-- Block STA Right click popup -->
	<ul class='custom-menu-acl'>
		<li class="handle acl">
			<span><img src="/facesix/static/qubercomm/images/venue/block.png"></span>
			<label>Blacklist</label>
		</li>
	</ul>
	
<div class="rebootPopup aclSavearea" style="position: fixed; display: none;">
<div class="aclSavearea_bottom">
			<div class="left-section">
				<label>Are you sure you want to reset the device?</label>
			</div>
			<div class="rightsection">
				<ul class="list-unstyled">
					<li id="cancelDelete">
						<label>
							
						</label>
						<span>
							Cancel
						</span>
					</li>
					<li id="deleteItem" action="reset" uid="{{uid}}">
						<label>
						</label>
						<span class="color2">
							OK
						</span>
					</li>
				</ul>
			</div>
			</div>
		</div>
		


	<img src="/facesix/static/qubercomm/images/networkicons/server_inactive.png" height="30" id="serverOffline" width="30" style="display:none">
	<img src="/facesix/static/qubercomm/images/networkicons/switch_inactive.png" height="30" id="switchOffline" width="30" style="display:none">
	<img src="/facesix/static/qubercomm/images/networkicons/ap_inactive.png" height="30" id="apOffline" width="30" style="display:none">
	<img src="/facesix/static/qubercomm/images/networkicons/sensor_inactive.png" height="30" id="sensorOffline" width="30" style="display:none">
		
		
		
<!-- js -->
<script src="/facesix/static/qubercomm/js/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/jquery_validate_min_js.js" type="text/javascript"></script>
<!-- <script src="/facesix/static/qubercomm/js/form-validations.js" type="text/javascript"></script> -->
<script src="https://jqueryvalidation.org/files/dist/additional-methods.min.js"></script>

<script type="text/javascript" src="/facesix/static/qubercomm/js/jquery.nicescroll.min.js"></script>
<!-- <script type="text/javascript" src="/facesix/static/qubercomm/js/jquery.mobile-events.js"></script> -->
<script type="text/javascript" src="/facesix/static/qubercomm/js/common.js"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/handlebars.min.js"></script>
<script src="/facesix/static/qubercomm/js/acl.js" type="text/javascript"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/script.js"></script>

<script type="text/javascript" src="/facesix/static/qubercomm/js/snap.svg-min.js"></script>
<script src="/facesix/static/qubercomm/js/jqpanzoom.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/d3.v3.js"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/underscore-min.js"></script>


<script src="/facesix/static/qubercomm/js/networkcon.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/networkconfig.js" type="text/javascript"></script>
<script>
$(function() {
	if($('#pid').val()=='uid') {
		$('#uid').prop("disabled", false); 
		$('#uid').css("background", "#f8f8f8"); 
	} else {
		$('#uid').prop("disabled", true);
		$('#uid').css("background", "#666"); 
	}
	
	$('#saveset').click( function() {
		var ok = 0;
		$('#uid,#ssid,#conn').css("border", "1px solid #ddd");
		
		if($('#pid').val()=="uid" && $('#uid').val()==""){
			$('#uid').css("border", "1px solid red");
			$('#uid').focus();
			ok = 1
		}
		if($('#ssid').val()==""){
			$('#ssid').css("border", "1px solid red");
			$('#ssid').focus();
			ok = 2
		} 
		if($('#conn').val()=="" || $('#conn').val().length<17){
			$('#conn').css("border", "1px solid red");
			$('#conn').focus();
			ok = 3;
		} 
		console.log('-------'+ok)
		if(ok == 0){
			console.log('----submit---')
			$("#trigsubmit").trigger("click");   
		}
		
		
	});
});
function checkUID(){
	$('#uid').val('');	
	if($('#pid').val()=='uid') {
		$('#uid').prop("disabled", false); 
		$('#uid').css("background", "#f8f8f8"); 
	} else {
		$('#uid').prop("disabled", true);
		$('#uid').css("background", "#ccc"); 
	}
}
</script>

<script id="chartbox-acl-template" type="text/x-handlebars-template">
	 	
	  <div style="float: right;cursor: pointer;">
       {{#if SYS_WRITE}}
		<span  class="powerBtn pwr" action="racl" btn-type="racl" devtype="AP" uid="\{{mac_address}}" style=" ">
			<label class="">
				<a href="#">
					<i class="fa fa-trash" aria-hidden="true"></i> 
				</a>
				<span class="hideMenu" style="cursor: pointer;">Reset</span>
			</label>
		</span>
       {{/if}}
	</div>
 
	<div class="device-coon-desc">
		<label>Access Control List</label>

		

		<span class="table-page" data-table-name="dashboard-table"><i class="fa fa-refresh acl-refreshTable" aria-hidden="true"></i>\{{#if show_previous_button}}<i class="fa fa-caret-left acl-tablePreviousPage"></i>\{{/if}}&nbsp;\{{#if show_next_button}}<i class="fa fa-caret-right acl-tableNextPage"></i>\{{/if}}</span>

	</div>
	

	<div class="tableSection">
		<table class="table dashboard-table" id="dashboard-table" data-current-page="\{{current_page}}" data-row-limit="10">
			<thead>
				<tr class="sel_tbl1">
					<th onclick="sort_table('aclTable', 0, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(0)" class="width-40"># <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('aclTable', 1, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(1)">SSID <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('aclTable', 2, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(2)">Policy <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('aclTable', 3, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(3)">Client <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('aclTable', 4, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(4)">UID <i class="fa fa-arrow-up"></i></th>
					{{#if SYS_WRITE}}<th>Action <i class="fa fa-arrow-up"></i></th>{{/if}}
					
				</tr>
			</thead>
			<tbody id="aclTable">
				\{{#each data}}
				<tr class="tr_aclrow" id="aclrow" mac-id="\{{mac_address}}" uid="\{{uid}}">
					<td style="color: black;">\{{index}}</td>
					<td style="color: black;">\{{ssid}}</td>
					<td style="color: black;">\{{pid}}</td>
					<td style="text-transform:uppercase; color:black">\{{mac_address}}</td>
					<td style="text-transform:uppercase; color:black">\{{uid}}</td>
					{{#if SYS_WRITE}}
					<td style="color: black;">
		               <span class="powerBtn" action="acl" btn-type="acl" devtype="AP" uid="\{{mac_address}}">
		                <input id="commit" type="submit" name="commit" value="Remove" />
		               </span>					
					
					</td>
					{{/if}}
				</tr>
				\{{/each}}
			</tbody>

		</table>
	</div>	
	
</script>

{{/partial}}

{{>qubercomm/nav-top}}
{{>qubercomm/nav-left}}
{{>qubercomm/wrapper}}



